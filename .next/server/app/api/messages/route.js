"use strict";(()=>{var e={};e.id=217,e.ids=[217],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3292:e=>{e.exports=require("fs/promises")},1017:e=>{e.exports=require("path")},1978:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>q,patchFetch:()=>N,requestAsyncStorage:()=>v,routeModule:()=>h,serverHooks:()=>y,staticGenerationAsyncStorage:()=>w});var r={};s.r(r),s.d(r,{GET:()=>f,POST:()=>j});var n=s(9303),a=s(8716),o=s(670),i=s(7070),u=s(3292),p=s.n(u),c=s(1017),d=s.n(c),l=s(9178);let m=d().join(process.cwd(),"data","messages.json");async function x(){try{let e=await p().readFile(m,"utf-8");return JSON.parse(e)}catch{return[]}}async function g(e){await p().writeFile(m,JSON.stringify(e,null,2),"utf-8")}async function f(){if(!(0,l.m)())return i.NextResponse.json({error:"Unauthorized"},{status:401});let e=await x();return i.NextResponse.json(e)}async function j(e){let t=await e.json().catch(()=>null);if(!t)return i.NextResponse.json({error:"Invalid body"},{status:400});let{name:s,email:r,topic:n="",message:a=""}=t;if(!s||!r)return i.NextResponse.json({error:"Missing fields"},{status:400});let o=await x();return o.push({id:Date.now(),name:s,email:r,topic:n,message:a,createdAt:new Date().toISOString()}),await g(o),i.NextResponse.json({ok:!0})}let h=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/messages/route",pathname:"/api/messages",filename:"route",bundlePath:"app/api/messages/route"},resolvedPagePath:"C:\\Users\\jason\\documents\\cousor\\動畫滾動網站製作\\app\\api\\messages\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:v,staticGenerationAsyncStorage:w,serverHooks:y}=h,q="/api/messages/route";function N(){return(0,o.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:w})}},9178:(e,t,s)=>{s.d(t,{m:()=>a});var r=s(1615);let n=process.env.ADMIN_TOKEN||"poweradmin-token";function a(){let e=r.cookies().get("admin_token")?.value;return!!e&&e===n}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,564],()=>s(1978));module.exports=r})();